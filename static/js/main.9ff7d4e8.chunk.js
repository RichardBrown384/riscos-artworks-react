(this["webpackJsonpriscos-artworks-react"]=this["webpackJsonpriscos-artworks-react"]||[]).push([[0],{126:function(t,e,r){},38:function(t,e,r){"use strict";(function(t){var n=r(5),a=r.n(n),c=r(39),i=r(10),o=r(2),s=r(40),u=r(41),f=r(42),l=r(48),d=r(1);e.a=function(){var e=Object(o.useState)(null),r=Object(i.a)(e,2),n=r[0],h=r[1];function O(){return(O=Object(c.a)(a.a.mark((function e(r){var n,c,o,s,u;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.target.files,c=void 0===n?[]:n,o=Object(i.a)(c,1),!(s=o[0])){e.next=15;break}return e.prev=3,e.next=6,s.arrayBuffer();case 6:u=e.sent,h(t.from(u)),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),h(null);case 13:e.next=16;break;case 15:h(null);case 16:case"end":return e.stop()}}),e,null,[[3,10]])})))).apply(this,arguments)}return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"RISC OS Artworks Viewer"}),Object(d.jsx)("input",{type:"file",onChange:function(t){return O.apply(this,arguments)}}),Object(d.jsx)(s.a,{buffer:n}),Object(d.jsx)(u.a,{buffer:n}),Object(d.jsx)(l.a,{buffer:n}),Object(d.jsx)(f.a,{buffer:n})]})}}).call(this,r(127).Buffer)},40:function(t,e,r){"use strict";var n=r(6),a=r(3),c=r(0),i=r(1);function o(t,e){function r(t){var e,r=[],n=Object(a.a)(t);try{for(n.s();!(e=n.n()).done;){var c=e.value,i=c.tag,o=c.points,s=void 0===o?[]:o;r.push("".concat(i," ").concat(s.flatMap((function(t){return[t.x,t.y]}))))}}catch(u){n.e(u)}finally{n.f()}return r.join(" ")}return t.map((function(t,n){return Object(i.jsx)("path",{d:r(t),fill:"none",stroke:"black",strokeWidth:e},n)}))}function s(t){var e=t.records,r=void 0===e?[]:e,i=[],o={};function s(t){var e=t.path;!function(t){function e(t,e,r){return e?t(e,r):r}(function(t){var e=t.minX,r=t.maxX,n=t.minY,a=t.maxY;return e<r&&n<a})(t)&&(o.minX=e(Math.min,o.minX,t.minX),o.maxX=e(Math.max,o.maxX,t.maxX),o.minY=e(Math.min,o.minY,t.minY),o.maxY=e(Math.max,o.maxY,t.maxY))}(t.boundingBox),i.push(e)}function u(t){var e=t.children,r=void 0===e?[]:e,i=Object(n.a)(t,["children"]);switch(255&i.type){case c.RECORD_PATH:case c.RECORD_2C:case c.RECORD_34:case c.RECORD_35:case c.RECORD_38:case c.RECORD_3D:s(i)}var o,f=Object(a.a)(r);try{for(f.s();!(o=f.n()).done;){u(o.value)}}catch(l){f.e(l)}finally{f.f()}}var f,l=Object(a.a)(r);try{for(l.s();!(f=l.n()).done;){u(f.value)}}catch(d){l.e(d)}finally{l.f()}return{boundingBox:o,paths:i}}e.a=function(t){var e=t.buffer;if(!e)return Object(i.jsx)("div",{});var r=c.Artworks.load(e),n=r.error;if(n)return Object(i.jsx)("div",{children:Object(i.jsxs)("div",{children:["A problem occurred loading the file: ",n.message]})});var a=s(r),u=a.boundingBox,f=u.minX,l=u.maxX,d=u.minY,h=u.maxY,O=a.paths,b=Math.max(l-f,1),p=Math.max(h-d,1),x=800*p/b,j=800/b,v=x/p,m=[j,0,0,-v,-j*f,v*h];return Object(i.jsx)("div",{children:Object(i.jsx)("svg",{width:800,height:x,children:Object(i.jsx)("g",{transform:"matrix(".concat(m,")"),children:o(O,160)})})})}},41:function(t,e,r){"use strict";var n=r(10),a=r(3),c=r(4),i=r(6),o=r(0),s=r(1),u=r(2);function f(t){return t.map((function(t,e){var r=t.pointer,n=Object(i.a)(t,["pointer"]);return Object(u.createElement)("path",Object(c.a)(Object(c.a)({},n),{},{key:e}),Object(s.jsx)("desc",{children:JSON.stringify(r)}))}))}function l(t,e){return e.map((function(e,r){var n=e.stops,a=Object(i.a)(e,["stops"]);return Object(u.createElement)(t,Object(c.a)(Object(c.a)({},a),{},{key:r}),function(t){return t.map((function(t,e){return Object(u.createElement)("stop",Object(c.a)(Object(c.a)({},t),{},{key:e}))}))}(n))}))}function d(t){var e=t.records,r=void 0===e?[]:e,s=t.palette,u=void 0===s?{}:s,f=[],l=[],d=[],h={},O={fill:"none",fillRule:"nonzero",stroke:"black",strokeWidth:160,strokeLinecap:"butt"};function b(t){var e=u.colours,r=void 0===e?[]:e;if(t<r.length){var n=r[t].colour,a=void 0===n?16711935:n;return"rgb(".concat([255&a,a>>8&255,a>>16&255],")")}return"none"}function p(t){var e,r=[],n=Object(a.a)(t);try{for(n.s();!(e=n.n()).done;){var c=e.value,i=c.tag,o=c.points,s=void 0===o?[]:o;r.push("".concat(i," ").concat(s.flatMap((function(t){return[t.x,t.y]}))))}}catch(u){n.e(u)}finally{n.f()}return r.join(" ")}function x(t){var e=t.fillType,r=Object(i.a)(t,["fillType"]);switch(e){case o.FILL_FLAT:return b(r.colour);case o.FILL_LINEAR:return function(t){var e=t.gradientLine,r=t.startColour,a=t.endColour,c="linear-gradient-".concat(f.length),i=Object(n.a)(e,2),o=i[0],s=i[1],u={id:c,gradientUnits:"userSpaceOnUse",x1:o.x,y1:o.y,x2:s.x,y2:s.y,stops:[{offset:"0%",stopColor:b(r)},{offset:"100%",stopColor:b(a)}]};return f.push(u),"url(#".concat(c,")")}(r);case o.FILL_RADIAL:return function(t){var e=t.gradientLine,r=t.startColour,a=t.endColour,c="radial-gradient-".concat(l.length),i=Object(n.a)(e,2),o=i[0],s=i[1],u=s.x-o.x,f=s.y-o.y,d=Math.sqrt(u*u+f*f),h={id:c,gradientUnits:"userSpaceOnUse",cx:o.x,cy:o.y,fx:o.x,fy:o.y,r:d,stops:[{offset:"0%",stopColor:b(r)},{offset:"100%",stopColor:b(a)}]};return l.push(h),"url(#".concat(c,")")}(r);default:return"none"}}function j(t){var e=t.pointer,r=t.path;!function(t){function e(t,e,r){return e?t(e,r):r}(function(t){var e=t.minX,r=t.maxX,n=t.minY,a=t.maxY;return e<r&&n<a})(t)&&(h.minX=e(Math.min,h.minX,t.minX),h.maxX=e(Math.max,h.maxX,t.maxX),h.minY=e(Math.min,h.minY,t.minY),h.maxY=e(Math.max,h.maxY,t.maxY))}(t.boundingBox),d.push(Object(c.a)(Object(c.a)({d:p(r)},O),{},{pointer:e})),O.fill="none",O.stroke="black",O.strokeWidth=160,O.strokeLinecap="butt"}function v(t){var e=t.capStyle;O.strokeLinecap=["butt","round","square","butt"][e]}function m(t,e){var r=t.children,n=void 0===r?[]:r,c=Object(i.a)(t,["children"]);function s(){if(e){var t,r=Object(a.a)(n.reverse());try{for(r.s();!(t=r.n()).done;){m(t.value,!1)}}catch(o){r.e(o)}finally{r.f()}}else{var c,i=Object(a.a)(n);try{for(i.s();!(c=i.n()).done;){m(c.value,!0)}}catch(o){i.e(o)}finally{i.f()}}}switch(255&c.type){case o.RECORD_PATH:s(),j(c);break;case o.RECORD_STROKE_COLOUR:!function(t){var e=t.strokeColour;O.stroke=b(e)}(c);break;case o.RECORD_STROKE_WIDTH:!function(t){var e=t.strokeWidth;O.strokeWidth=e}(c);break;case o.RECORD_FILL_COLOUR:!function(t){O.fill=x(t)}(c);break;case o.RECORD_LINE_CAP_START:case o.RECORD_LINE_CAP_END:v(c);break;case o.RECORD_2C:case o.RECORD_34:case o.RECORD_35:case o.RECORD_38:case o.RECORD_3D:s(),j(c);break;default:s()}}var R,y=Object(a.a)(r);try{for(y.s();!(R=y.n()).done;){m(R.value,!0)}}catch(C){y.e(C)}finally{y.f()}return{boundingBox:h,linearGradients:f,radialGradients:l,paths:d}}e.a=function(t){var e=t.buffer;if(!e)return Object(s.jsx)("div",{});var r=o.Artworks.load(e),n=r.error;if(n)return Object(s.jsx)("div",{children:Object(s.jsxs)("div",{children:["A problem occurred loading the file: ",n.message]})});var a=d(r),c=a.boundingBox,i=c.minX,u=c.maxX,h=c.minY,O=c.maxY,b=a.linearGradients,p=a.radialGradients,x=a.paths,j=Math.max(u-i,1),v=Math.max(O-h,1),m=800*v/j,R=800/j,y=m/v,C=[R,0,0,-y,-R*i,y*O];return Object(s.jsx)("div",{children:Object(s.jsxs)("svg",{width:800,height:m,children:[Object(s.jsxs)("defs",{children:[l("linearGradient",b),l("radialGradient",p)]}),Object(s.jsx)("g",{transform:"matrix(".concat(C,")"),children:f(x)})]})})}},42:function(t,e,r){"use strict";var n=r(43),a=r(44),c=r(45),i=r(50),o=r(4),s=r(6),u=r(2),f=r.n(u),l=r(11),d=r(0),h=r(1),O=["flat","linear","radial"];function b(t){var e=t.type,r=Object(s.a)(t,["type"]);return e?function(t){var e=t.type,r=t.fillType,n=t.strokeWidth,a=t.strokeColour;switch(255&e){case d.RECORD_PATH:return"Path (2)";case d.RECORD_GROUP:return"Group";case d.RECORD_LAYER:return"Layer";case d.RECORD_STROKE_COLOUR:return"Stroke (".concat(0|a,")");case d.RECORD_STROKE_WIDTH:return"Stroke width (".concat(n,")");case d.RECORD_FILL_COLOUR:return"Fill (".concat(O[r],")");case d.RECORD_LINE_CAP_END:return"Cap start";case d.RECORD_LINE_CAP_START:return"Cap end";case d.RECORD_2C:return"Path (2C)";case d.RECORD_34:return"Path (34)";case d.RECORD_CHARACTER:return"Character";default:return e.toString(16)}}(Object(o.a)({type:e},r)):"List"}var p=function(t){Object(c.a)(r,t);var e=Object(i.a)(r);function r(t){var a;return Object(n.a)(this,r),(a=e.call(this,t)).ref=f.a.createRef(),a}return Object(a.a)(r,[{key:"componentDidUpdate",value:function(){this.buildTree()}},{key:"componentDidMount",value:function(){this.buildTree()}},{key:"buildTree",value:function(){var t=this.props.buffer;if(t){var e=l.a({children:d.Artworks.load(t).records});e.dx=10,e.dy=1600/(e.height+1);var r=l.d().nodeSize([e.dx,e.dy])(e),n=1/0,a=-n;r.each((function(t){t.x>a&&(a=t.x),t.x<n&&(n=t.x)})),this.ref.current.innerHTML="";var c=l.c(this.ref.current).append("svg").attr("viewBox",[0,0,1600,a-n+2*r.dx]).append("g").attr("font-family","sans-serif").attr("font-size",10).attr("transform","translate(".concat(r.dy/3,",").concat(r.dx-n,")")),i=(c.append("g").attr("fill","none").attr("stroke","#555").attr("stroke-opacity",.4).attr("stroke-width",1.5).selectAll("path").data(r.links()).join("path").attr("d",l.b().x((function(t){return t.y})).y((function(t){return t.x}))),c.append("g").attr("stroke-linejoin","round").attr("stroke-width",3).selectAll("g").data(r.descendants()).join("g").attr("transform",(function(t){return"translate(".concat(t.y,",").concat(t.x,")")})));i.append("circle").attr("fill",(function(t){return t.children?"#555":"#999"})).attr("r",2.5),i.append("text").attr("dy","0.31em").attr("x",(function(t){return t.children?-6:6})).attr("text-anchor",(function(t){return t.children?"end":"start"})).text((function(t){return b(t.data)})).clone(!0).lower().attr("stroke","white")}}},{key:"render",value:function(){return this.props.buffer?Object(h.jsx)("div",{ref:this.ref}):Object(h.jsx)("div",{})}}]),r}(u.Component);e.a=p},48:function(t,e,r){"use strict";var n=r(49),a=r.n(n),c=r(0),i=r(1);e.a=function(t){var e=t.buffer;if(!e)return Object(i.jsx)("div",{});var r=c.Artworks.load(e);return Object(i.jsx)(a.a,{data:r})}},51:function(t,e,r){"use strict";r.r(e);var n=r(2),a=r.n(n),c=r(37),i=r.n(c),o=(r(126),r(38)),s=r(1);!function(){function t(){var t=this;return new Promise((function(e){var r=new FileReader;r.onload=function(){e(r.result)},r.readAsArrayBuffer(t)}))}File.prototype.arrayBuffer=File.prototype.arrayBuffer||t,Blob.prototype.arrayBuffer=Blob.prototype.arrayBuffer||t}(),i.a.render(Object(s.jsx)(a.a.StrictMode,{children:Object(s.jsx)(o.a,{})}),document.getElementById("root"))}},[[51,1,2]]]);
//# sourceMappingURL=main.9ff7d4e8.chunk.js.map